let states = [
    {
      "FIELD1": 0,
      "state": "Alabama",
      "incident_count": 2343,
      "population": 5039877,
      "per_capita": "46.48922979667956",
      "Unnamed: 0": 0,
      "Gov_Political_Affiliation": "Republican",
      "Lat": 32.318231,
      "Long": -86.902298
    },
    {
      "FIELD1": 1,
      "state": "Alaska",
      "incident_count": 825,
      "population": 732673,
      "per_capita": "112.60139243564318",
      "Unnamed: 0": 1,
      "Gov_Political_Affiliation": "Republican",
      "Lat": 63.588753,
      "Long": -154.493062
    },
    {
      "FIELD1": 2,
      "state": "Arizona",
      "incident_count": 1034,
      "population": 7276316,
      "per_capita": "14.210487834777929",
      "Unnamed: 0": 2,
      "Gov_Political_Affiliation": "Republican",
      "Lat": 34.048928,
      "Long": -111.093731
    },
    {
      "FIELD1": 3,
      "state": "Arkansas",
      "incident_count": 1258,
      "population": 3025891,
      "per_capita": "41.57453127029361",
      "Unnamed: 0": 3,
      "Gov_Political_Affiliation": "Republican",
      "Lat": 35.20105,
      "Long": -91.831833
    },
    {
      "FIELD1": 4,
      "state": "California",
      "incident_count": 6851,
      "population": 39237836,
      "per_capita": "17.460188171437384",
      "Unnamed: 0": 4,
      "Gov_Political_Affiliation": "Democrat",
      "Lat": 36.778261,
      "Long": -119.417932
    },
    {
      "FIELD1": 5,
      "state": "Colorado",
      "incident_count": 1600,
      "population": 5812069,
      "per_capita": "27.528923004871412",
      "Unnamed: 0": 5,
      "Gov_Political_Affiliation": "Democrat",
      "Lat": 39.550051,
      "Long": -105.782067
    },
    {
      "FIELD1": 6,
      "state": "Connecticut",
      "incident_count": 1540,
      "population": 3605597,
      "per_capita": "42.7113734563236",
      "Unnamed: 0": 6,
      "Gov_Political_Affiliation": "Democrat",
      "Lat": 41.603221,
      "Long": -73.087749
    },
    {
      "FIELD1": 7,
      "state": "Delaware",
      "incident_count": 694,
      "population": 1003384,
      "per_capita": "69.16594245074667",
      "Unnamed: 0": 7,
      "Gov_Political_Affiliation": "Democrat",
      "Lat": 38.910832,
      "Long": -75.52767
    },
    {
      "FIELD1": 8,
      "state": "District of Columbia",
      "incident_count": 1035,
      "population": 670050,
      "per_capita": "154.4660846205507",
      "Unnamed: 0": 8,
      "Gov_Political_Affiliation": "Democrat",
      "Lat": 38.905985,
      "Long": -77.033418
    },
    {
      "FIELD1": 9,
      "state": "Florida",
      "incident_count": 6903,
      "population": 21781128,
      "per_capita": "31.692573497570926",
      "Unnamed: 0": 9,
      "Gov_Political_Affiliation": "Republican",
      "Lat": 27.664827,
      "Long": -81.515754
    },
    {
      "FIELD1": 10,
      "state": "Georgia",
      "incident_count": 4475,
      "population": 10799566,
      "per_capita": "41.436850332689296",
      "Unnamed: 0": 10,
      "Gov_Political_Affiliation": "Republican",
      "Lat": 32.157435,
      "Long": -82.907123
    },
    {
      "FIELD1": 11,
      "state": "Hawaii",
      "incident_count": 154,
      "population": 1441553,
      "per_capita": "10.682923208511932",
      "Unnamed: 0": 11,
      "Gov_Political_Affiliation": "Democrat",
      "Lat": 19.898682,
      "Long": -155.665857
    },
    {
      "FIELD1": 12,
      "state": "Idaho",
      "incident_count": 332,
      "population": 1900923,
      "per_capita": "17.465199800307534",
      "Unnamed: 0": 12,
      "Gov_Political_Affiliation": "Republican",
      "Lat": 44.068202,
      "Long": -114.742041
    },
    {
      "FIELD1": 13,
      "state": "Illinois",
      "incident_count": 8511,
      "population": 12671469,
      "per_capita": "67.16664026878021",
      "Unnamed: 0": 13,
      "Gov_Political_Affiliation": "Democrat",
      "Lat": 40.633125,
      "Long": -89.398528
    },
    {
      "FIELD1": 14,
      "state": "Indiana",
      "incident_count": 2831,
      "population": 6805985,
      "per_capita": "41.59574257069329",
      "Unnamed: 0": 14,
      "Gov_Political_Affiliation": "Republican",
      "Lat": 40.551217,
      "Long": -85.602364
    },
    {
      "FIELD1": 15,
      "state": "Iowa",
      "incident_count": 1246,
      "population": 3193079,
      "per_capita": "39.02189704670633",
      "Unnamed: 0": 15,
      "Gov_Political_Affiliation": "Republican",
      "Lat": 41.878003,
      "Long": -93.097702
    },
    {
      "FIELD1": 16,
      "state": "Kansas",
      "incident_count": 1033,
      "population": 2934582,
      "per_capita": "35.20092469728227",
      "Unnamed: 0": 16,
      "Gov_Political_Affiliation": "Republican",
      "Lat": 39.011902,
      "Long": -98.484246
    },
    {
      "FIELD1": 17,
      "state": "Kentucky",
      "incident_count": 1935,
      "population": 4509394,
      "per_capita": "42.91042210993317",
      "Unnamed: 0": 17,
      "Gov_Political_Affiliation": "Democrat",
      "Lat": 37.839333,
      "Long": -84.270018
    },
    {
      "FIELD1": 18,
      "state": "Louisiana",
      "incident_count": 3762,
      "population": 4624047,
      "per_capita": "81.35730454296854",
      "Unnamed: 0": 18,
      "Gov_Political_Affiliation": "Republican",
      "Lat": 31.244823,
      "Long": -92.145024
    },
    {
      "FIELD1": 19,
      "state": "Maine",
      "incident_count": 463,
      "population": 1372247,
      "per_capita": "33.74028145078837",
      "Unnamed: 0": 19,
      "Gov_Political_Affiliation": "Democrat",
      "Lat": 45.253783,
      "Long": -69.445469
    },
    {
      "FIELD1": 20,
      "state": "Maryland",
      "incident_count": 2577,
      "population": 6165129,
      "per_capita": "41.799611978922094",
      "Unnamed: 0": 20,
      "Gov_Political_Affiliation": "Republican",
      "Lat": 39.045755,
      "Long": -76.641271
    },
    {
      "FIELD1": 21,
      "state": "Massachusetts",
      "incident_count": 2882,
      "population": 6984723,
      "per_capita": "41.261478801664715",
      "Unnamed: 0": 21,
      "Gov_Political_Affiliation": "Democrat",
      "Lat": 42.407211,
      "Long": -71.382437
    },
    {
      "FIELD1": 22,
      "state": "Michigan",
      "incident_count": 2584,
      "population": 10050811,
      "per_capita": "25.709368129596708",
      "Unnamed: 0": 22,
      "Gov_Political_Affiliation": "Democrat",
      "Lat": 44.314844,
      "Long": -85.602364
    },
    {
      "FIELD1": 23,
      "state": "Minnesota",
      "incident_count": 878,
      "population": 5707390,
      "per_capita": "15.383564115996979",
      "Unnamed: 0": 23,
      "Gov_Political_Affiliation": "Democrat",
      "Lat": 46.729553,
      "Long": -94.6859
    },
    {
      "FIELD1": 24,
      "state": "Mississippi",
      "incident_count": 1513,
      "population": 2949965,
      "per_capita": "51.2887441037436",
      "Unnamed: 0": 24,
      "Gov_Political_Affiliation": "Republican",
      "Lat": 32.354668,
      "Long": -89.398528
    },
    {
      "FIELD1": 25,
      "state": "Missouri",
      "incident_count": 3254,
      "population": 6168187,
      "per_capita": "52.754561429476766",
      "Unnamed: 0": 25,
      "Gov_Political_Affiliation": "Republican",
      "Lat": 37.964253,
      "Long": -91.831833
    },
    {
      "FIELD1": 26,
      "state": "Montana",
      "incident_count": 302,
      "population": 1104271,
      "per_capita": "27.348359234282164",
      "Unnamed: 0": 26,
      "Gov_Political_Affiliation": "Republican",
      "Lat": 46.879682,
      "Long": -110.362566
    },
    {
      "FIELD1": 27,
      "state": "Nebraska",
      "incident_count": 755,
      "population": 1963692,
      "per_capita": "38.447984714507164",
      "Unnamed: 0": 27,
      "Gov_Political_Affiliation": "Republican",
      "Lat": 41.492537,
      "Long": -99.901813
    },
    {
      "FIELD1": 28,
      "state": "Nevada",
      "incident_count": 1027,
      "population": 3143991,
      "per_capita": "32.6654879101117",
      "Unnamed: 0": 28,
      "Gov_Political_Affiliation": "Democrat",
      "Lat": 38.80261,
      "Long": -116.419389
    },
    {
      "FIELD1": 29,
      "state": "New Hampshire",
      "incident_count": 481,
      "population": 1388992,
      "per_capita": "34.62942911118279",
      "Unnamed: 0": 29,
      "Gov_Political_Affiliation": "Republican",
      "Lat": 43.193852,
      "Long": -71.572395
    },
    {
      "FIELD1": 30,
      "state": "New Jersey",
      "incident_count": 2286,
      "population": 9267130,
      "per_capita": "24.667831356633606",
      "Unnamed: 0": 30,
      "Gov_Political_Affiliation": "Democrat",
      "Lat": 40.058324,
      "Long": -74.405661
    },
    {
      "FIELD1": 31,
      "state": "New Mexico",
      "incident_count": 794,
      "population": 2115877,
      "per_capita": "37.525810810363744",
      "Unnamed: 0": 31,
      "Gov_Political_Affiliation": "Democrat",
      "Lat": 34.97273,
      "Long": -105.032363
    },
    {
      "FIELD1": 32,
      "state": "New York",
      "incident_count": 5425,
      "population": 19835913,
      "per_capita": "27.349383917947208",
      "Unnamed: 0": 32,
      "Gov_Political_Affiliation": "Democrat",
      "Lat": 43.299428,
      "Long": -74.217933
    },
    {
      "FIELD1": 33,
      "state": "North Carolina",
      "incident_count": 3957,
      "population": 10551162,
      "per_capita": "37.502978344944374",
      "Unnamed: 0": 33,
      "Gov_Political_Affiliation": "Democrat",
      "Lat": 35.759573,
      "Long": -79.0193
    },
    {
      "FIELD1": 34,
      "state": "North Dakota",
      "incident_count": 299,
      "population": 774948,
      "per_capita": "38.58323397182779",
      "Unnamed: 0": 34,
      "Gov_Political_Affiliation": "Republican",
      "Lat": 47.551493,
      "Long": -101.002012
    },
    {
      "FIELD1": 35,
      "state": "Ohio",
      "incident_count": 4574,
      "population": 11780017,
      "per_capita": "38.82846688591366",
      "Unnamed: 0": 35,
      "Gov_Political_Affiliation": "Republican",
      "Lat": 40.417287,
      "Long": -82.907123
    },
    {
      "FIELD1": 36,
      "state": "Oklahoma",
      "incident_count": 1738,
      "population": 3986639,
      "per_capita": "43.595620270608904",
      "Unnamed: 0": 36,
      "Gov_Political_Affiliation": "Republican",
      "Lat": 35.007752,
      "Long": -97.092877
    },
    {
      "FIELD1": 37,
      "state": "Oregon",
      "incident_count": 1238,
      "population": 4246155,
      "per_capita": "29.15578917868048",
      "Unnamed: 0": 37,
      "Gov_Political_Affiliation": "Democrat",
      "Lat": 43.804133,
      "Long": -120.554201
    },
    {
      "FIELD1": 38,
      "state": "Pennsylvania",
      "incident_count": 3974,
      "population": 12964056,
      "per_capita": "30.653986684414196",
      "Unnamed: 0": 38,
      "Gov_Political_Affiliation": "Democrat",
      "Lat": 41.203322,
      "Long": -77.194525
    },
    {
      "FIELD1": 39,
      "state": "Rhode Island",
      "incident_count": 463,
      "population": 1095610,
      "per_capita": "42.259563165725034",
      "Unnamed: 0": 39,
      "Gov_Political_Affiliation": "Democrat",
      "Lat": 41.580095,
      "Long": -71.477429
    },
    {
      "FIELD1": 40,
      "state": "South Carolina",
      "incident_count": 3186,
      "population": 5190705,
      "per_capita": "61.37894563455253",
      "Unnamed: 0": 40,
      "Gov_Political_Affiliation": "Republican",
      "Lat": 33.836081,
      "Long": -81.163725
    },
    {
      "FIELD1": 41,
      "state": "South Dakota",
      "incident_count": 247,
      "population": 895376,
      "per_capita": "27.586176086917675",
      "Unnamed: 0": 41,
      "Gov_Political_Affiliation": "Republican",
      "Lat": 43.969515,
      "Long": -99.901813
    },
    {
      "FIELD1": 42,
      "state": "Tennessee",
      "incident_count": 3777,
      "population": 6975218,
      "per_capita": "54.14884524039249",
      "Unnamed: 0": 42,
      "Gov_Political_Affiliation": "Republican",
      "Lat": 35.517491,
      "Long": -86.580447
    },
    {
      "FIELD1": 43,
      "state": "Texas",
      "incident_count": 6882,
      "population": 29527941,
      "per_capita": "23.30673852267586",
      "Unnamed: 0": 43,
      "Gov_Political_Affiliation": "Republican",
      "Lat": 31.968599,
      "Long": -99.901813
    },
    {
      "FIELD1": 44,
      "state": "Utah",
      "incident_count": 574,
      "population": 3337975,
      "per_capita": "17.196054494116943",
      "Unnamed: 0": 44,
      "Gov_Political_Affiliation": "Republican",
      "Lat": 39.32098,
      "Long": -111.093731
    },
    {
      "FIELD1": 45,
      "state": "Vermont",
      "incident_count": 211,
      "population": 645570,
      "per_capita": "32.684294499434614",
      "Unnamed: 0": 45,
      "Gov_Political_Affiliation": "Republican",
      "Lat": 44.558803,
      "Long": -72.577841
    },
    {
      "FIELD1": 46,
      "state": "Virginia",
      "incident_count": 2904,
      "population": 8642274,
      "per_capita": "33.602267181068314",
      "Unnamed: 0": 46,
      "Gov_Political_Affiliation": "Republican",
      "Lat": 37.431573,
      "Long": -78.656894
    },
    {
      "FIELD1": 47,
      "state": "Washington",
      "incident_count": 1693,
      "population": 7738692,
      "per_capita": "21.877082070199975",
      "Unnamed: 0": 47,
      "Gov_Political_Affiliation": "Democrat",
      "Lat": 47.751074,
      "Long": -120.740139
    },
    {
      "FIELD1": 48,
      "state": "West Virginia",
      "incident_count": 741,
      "population": 1782959,
      "per_capita": "41.56012561141338",
      "Unnamed: 0": 48,
      "Gov_Political_Affiliation": "Republican",
      "Lat": 38.597626,
      "Long": -80.454903
    },
    {
      "FIELD1": 49,
      "state": "Wisconsin",
      "incident_count": 1976,
      "population": 5895908,
      "per_capita": "33.514769904822124",
      "Unnamed: 0": 49,
      "Gov_Political_Affiliation": "Democrat",
      "Lat": 43.78444,
      "Long": -88.787868
    },
    {
      "FIELD1": 50,
      "state": "Wyoming",
      "incident_count": 325,
      "population": 578803,
      "per_capita": "56.15036549568679",
      "Unnamed: 0": 50,
      "Gov_Political_Affiliation": "Republican",
      "Lat": 43.075968,
      "Long": -107.290284
    }
   ]



   var party = states.map(function(TP){
  
    if (TP.Gov_Political_Affiliation == 'Republican'){
      return 'red';
    } else if (TP.Gov_Political_Affiliation == 'Democrat'){
      return 'blue';
    }
    console.log(party)
  })
  var trace1 = {
      x: states.map(row => row.per_capita),
      y: states.map(row => row.incident_count),
      text: states.map(row=> row.state),
      mode: 'markers',
      type: 'scatter',
      marker: {
        color: party,
        size: states.map(row => row.per_capita/2)
      }
      
    };
  
  var data = [trace1];
  
  var layout = {
    title: 'Per Capita Gun Incidents',
    showlegend: false,
    height: 500,
    width: 600,

    xaxis: {
      title: {
        text: 'Incidents Per Capita',
        font: {
          family: 'Courier New, monospace',
          size: 18,
          color: '#7f7f7f'
        }
      },
    },

    yaxis: {
      title: {
        text: 'Total Incidents',
        font: {
          family: 'Courier New, monospace',
          size: 18,
          color: '#7f7f7f'
        }
      },
    },

  };
  
  Plotly.newPlot('myDiv', data, layout);
  